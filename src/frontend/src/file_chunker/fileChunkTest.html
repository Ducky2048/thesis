<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="fileChunkTest.css">
    <script type="text/javascript" src="../../out/fileInChunkProcessor.js"></script>
    <script src="../../lib/wasm_exec.js"></script>
    <meta charset="UTF-8">
    <title>Test Files in Chunks Processing</title>
</head>
<body>
<noscript>
    <div class="huge_warning">
        We know JS sucks, but we're forced to use it. Please enable it. We're sorry.
    </div>
</noscript>
<script>
    if (!WebAssembly.instantiateStreaming) {
        WebAssembly.instantiateStreaming = async (resp, importObject) => {
            const source = await (await resp).arrayBuffer();
            return await WebAssembly.instantiate(source, importObject);
        }
    }
    const go = new Go();
    let mod, inst;
    WebAssembly.instantiateStreaming(fetch("test.wasm"), go.importObject).then(
        async result => {
            mod = result.module;
            inst = result.instance;
            await go.run(inst);
        }
    );
</script>
    <h2>Select a file</h2>
    <div id="select_file_zone">
        <input type="file" id="file"/>
        <button id="process-file" onclick="processFileButtonHandler()">Process File</button>
    </div>
    <div id="errors" class="red-text"></div>
    <div id="result"></div>
</body>
</html>
