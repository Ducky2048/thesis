!function(e){function t(t){for(var n,o,r=t[0],i=t[1],l=0,a=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&a.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);a.length;)a.shift()()}var n={},s={0:0};var o={};var r={2:function(){return{"./index.js":{__wbindgen_throw:function(e,t){return n[1].exports.__wbindgen_throw(e,t)}}}}};function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var l=new Promise((function(t,o){n=s[e]=[t,o]}));t.push(n[2]=l);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+e+".bundle.js"}(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}s[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return({1:[2]}[e]||[]).forEach((function(e){var n=o[e];if(n)t.push(n);else{var s,l=r[e](),a=fetch(i.p+""+{2:"0afeb1c764244eb13e40"}[e]+".module.wasm");if(l instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)s=Promise.all([WebAssembly.compileStreaming(a),l]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)s=WebAssembly.instantiateStreaming(a,l);else{s=a.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,l)}))}t.push(o[e]=s.then((function(t){return i.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e},i.w={};var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=a;i(i.s=0)}([function(e,t,n){"use strict";n.r(t);class s{static notNull(e){if(null==e)throw console.trace(this.nullmsg),new ReferenceError(this.nullmsg);return!0}static notUndefined(e){if(void 0===e)throw new ReferenceError(`Error: Object ${e} was undefined`);return!0}static notNullNotUndefined(e){return s.notNull(e)&&s.notUndefined(e)}}function o(e){const t=document.getElementById(e);if(null==t)throw new ReferenceError(`Error: Element with id "${e}" does not exist`);return t}s.nullmsg="Error: object was null";class r{static request(e,t,n,s,o,r){const i=new XMLHttpRequest,l=`${window.location.href.replace(window.location.pathname,"").replace(window.location.hash,"")}/${t}`;console.log(e+" "+l),i.open(e,l,!0),i.onload=function(){this.status>=200&&this.status<400?s&&s(JSON.parse(this.response)):o&&o(this.responseText)},i.onerror=function(e){o&&o(e)},"POST"===e&&null!=r&&i.setRequestHeader("Content-Type",r),i.send(n)}static requestPromise(e,t,n){return new Promise((s,o)=>{this.request(e,t,n,s,o)})}}class i{constructor(e){this.queue=Array(),this.started=!1,this.continuation=e}add(e){this.started?console.log("nope"):this.queue.push(()=>{const t=this.queue.pop();e(null!=t?t:this.continuation)})}start(){this.started=!0,this.queue.reverse();const e=this.queue.pop();null!=e&&e()}}class l{constructor(e,t,n,s){this.CHUNK_SIZE_IN_BYTES=2048e4,this.start=0,this.end=this.start+this.CHUNK_SIZE_IN_BYTES,this.numChunks=0,this.chunkCounter=0,this.inputFile=null,this.fileReader=new FileReader,this.fileReader.onload=this.getFileReadOnLoadHandler(),this.dataCallback=e,this.errorCallback=t,this.processingCompletedCallback=s,this.progressCallback=n}processChunks(e){this.inputFile=e,this.startTime=new Date,this.numChunks=Math.round(this.inputFile.size/this.CHUNK_SIZE_IN_BYTES),this.read(this.start,this.end)}getFileReadOnLoadHandler(){return()=>{s.notNull(this.inputFile)&&(this.dataCallback(new Uint8Array(this.fileReader.result)),this.start=this.end,this.end<this.inputFile.size?(this.chunkCounter++,this.end=this.start+this.CHUNK_SIZE_IN_BYTES,this.progressCallback(Math.round(this.chunkCounter/this.numChunks*100)),this.read(this.start,this.end)):this.processingCompletedCallback())}}read(e,t){s.notNull(this.inputFile)&&this.fileReader.readAsArrayBuffer(this.inputFile.slice(e,t))}}class a{static killAllChildren(e){for(;e.children.length>0;)e.removeChild(e.children[0])}static showSubmissionButton(e){const t=o("input-files-area");if(s.notNull(t)){t.innerHTML='<p class="lead">Hashing completed. Continue when ready</p>\n                         <button type="button" class="btn btn-block btn-outline-primary" id="submithashes">Submit for signing</button>';const n=o("submithashes");s.notNull(n)&&(n.onclick=t=>{n.disabled=!0,this.submitHashes(e)})}}static submitHashes(e){r.request("POST","/api/v1/hashes/",JSON.stringify({hashes:e}),t=>{console.log(t);const n={postHashesResponse:t,hashes:e};localStorage.setItem("lolnogenerics",JSON.stringify(n)),this.showIdpLoginButtons(t)},e=>console.log(`error ${e}`),"application/json"),console.log(`POST ${e}`)}static showIdpLoginButtons(e){const t=o("input-files-area");if(console.log("fu1"),s.notNull(t)&&s.notNull(t.parentNode)){console.log("fu2");const n='<p class="lead">Please select whom to authenticate with</p>\n                         <a href="IDPURL" class="button btn btn-block btn-outline-primary">IDPNAME</a>';this.killAllChildren(t);for(const s in e.providers){console.log("fu3");const o=document.createElement("div");o.innerHTML=n.replace("IDPURL",e.providers[s]).replace("IDPNAME",s),t.parentNode.insertBefore(o,t)}}}static progressCallbackBuilder(e,t){const n=o(`file.${t}`);return s.notNull(n)?t=>{n.innerHTML=this.renderCardTemplate(e,`${t}%`)}:e=>{console.log(`cardElement file.${t} was null, cannot update progress`)}}static processingCompletedBuilder(e,t,n,r,i){const l=o(`file.${r}`);return s.notNull(l)?()=>{const s=i.hex_digest();t.push(s),l.innerHTML=this.renderCardTemplate(n,s),e()}:()=>{console.log(`cardElement file.${r} was null, cannot update progress`)}}static renderCardTemplate(e,t){return'<div class="card mb-4 box-shadow">\n            <div class="card-header">\n                <h5 class="my-0 font-weight-normal">FILENAME</h5>\n            </div>\n            <div class="card-body">\n                <ul class="list-unstyled mt-3 mb-4">\n                    <li>Size: FILESIZE</li>\n                    <li>Type: FILETYPE</li>\n                    <li>Hash: FILEHASH</li>\n                </ul>\n\x3c!--                <button type="button" class="btn btn-block btn-danger">Remove file</button>--\x3e\n            </div>\n        </div>'.replace("FILENAME",e.name).replace("FILESIZE",e.size<1048576?`${Math.round(e.size/1024)} KB`:`${Math.round(e.size/1024/1024)} MB`).replace("FILETYPE",""!=e.type?e.type:"Unknown").replace("FILEHASH",t)}static getFilesFromElement(e){const t=o(e);if(s.notNull(t.files))return t.files.length<0?alert("Too few files selected. Please select at least one file."):this.updateFilesArea("Wait for hashing to finish"),t.files}static updateFilesArea(e){const t=o("input-files-area");s.notNull(t)&&(t.innerHTML=`<p class="lead">${e}</p>`)}static errorHandlingCallback(e){const t=o("error");t.innerHTML=`${t.innerHTML} <p>${e}</p>`}}class c{static handle(){const e=localStorage.getItem("lolnogenerics");if(s.notNull(e)){const t=JSON.parse(e),n={id_token:this.getIdTokenFromGetParameters(),seed:t.postHashesResponse.seed,salt:t.postHashesResponse.salt,hashes:t.hashes};r.request("POST","/api/v1/sign",JSON.stringify(n),e=>c.showDownloadButton(e),e=>console.log("error "+e),"application/json")}}static getIdTokenFromGetParameters(){const e=window.location.href.split("#")[1].split("&");for(const t of e){const e=t.split("=");if("id_token"==e[0])return e[1]}const t="Found no id_token in url";throw console.trace(t),new Error(t)}static showDownloadButton(e){const t=o("input-files-area");if(s.notNull(t)&&s.notNull(t.parentNode)){const n='<p class="lead">Signature creation successful!</p>\n                         <a href="SIGNATUREURL" class="button btn btn-block btn-outline-primary">Download</a>',s=document.createElement("div");a.killAllChildren(t),s.innerHTML=n.replace("SIGNATUREURL",e.signature),t.parentNode.insertBefore(s,t)}}static showErrorMessage(e){const t=o("input-files-area");if(s.notNull(t)&&s.notNull(t.parentNode)){const n='<p class="lead">Signature creation failed: ERROR</p>',s=document.createElement("div");a.killAllChildren(t),s.innerHTML=n.replace("ERROR",e),t.parentNode.insertBefore(s,t)}}}var u=function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function l(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}a((s=s.apply(e,t||[])).next())}))};function d(e){const t=document.getElementById("process-file");s.notNull(t)&&(t.onclick=function(){t.disabled=!0,function(e){const t=a.getFilesFromElement("file"),n=new Array,r=new i(()=>{a.showSubmissionButton(n)});if(s.notNullNotUndefined(t)){for(let i=0;i<t.length;i++){const c=t[i],u=o("cardarea");if(s.notNullNotUndefined(u)){const e=document.createElement("div");e.id=`file.${i}`,e.innerHTML=a.renderCardTemplate(c,"Queued"),s.notNull(u.parentNode)&&u.parentNode.insertBefore(e,u)}r.add(s=>{new l(t=>{e.update(new Uint8Array(t))},a.errorHandlingCallback,a.progressCallbackBuilder(c,i),a.processingCompletedBuilder(s,n,c,i,e)).processChunks(t[i])})}r.start()}}(new e.Sha256hasher)})}!function(){u(this,void 0,void 0,(function*(){document.location.pathname.includes("index")?d(yield n.e(1).then(n.bind(null,1))):document.location.pathname.includes("callback")&&c.handle()}))}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdHMvdmFsaWRhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvdHNRdWVyeS50cyIsIndlYnBhY2s6Ly8vLi90cy9odHRwLnRzIiwid2VicGFjazovLy8uL3RzL2NhbGxiYWNrSGVsbENoYWluZXIudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvZmlsZUluQ2h1bmtQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvY2FsbGJhY2sudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvaW5kZXgudHMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiaW5zdGFsbGVkTW9kdWxlcyIsIjAiLCJpbnN0YWxsZWRXYXNtTW9kdWxlcyIsIndhc21JbXBvcnRPYmplY3RzIiwiMiIsInAwaTMyIiwicDFpMzIiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZSIsImwiLCJlIiwicHJvbWlzZXMiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvblNjcmlwdENvbXBsZXRlIiwic2NyaXB0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsInAiLCJqc29ucFNjcmlwdFNyYyIsImVycm9yIiwiRXJyb3IiLCJldmVudCIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJjaHVuayIsImVycm9yVHlwZSIsInR5cGUiLCJyZWFsU3JjIiwidGFyZ2V0IiwibWVzc2FnZSIsIm5hbWUiLCJyZXF1ZXN0IiwidW5kZWZpbmVkIiwic2V0VGltZW91dCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJ3YXNtTW9kdWxlSWQiLCJpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSIsImltcG9ydE9iamVjdCIsInJlcSIsImZldGNoIiwiV2ViQXNzZW1ibHkiLCJjb21waWxlU3RyZWFtaW5nIiwiYWxsIiwidGhlbiIsIml0ZW1zIiwiaW5zdGFudGlhdGUiLCJpbnN0YW50aWF0ZVN0cmVhbWluZyIsIngiLCJhcnJheUJ1ZmZlciIsImJ5dGVzIiwicmVzIiwidyIsImluc3RhbmNlIiwibSIsImMiLCJkIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5Iiwib2UiLCJlcnIiLCJjb25zb2xlIiwianNvbnBBcnJheSIsIndpbmRvdyIsIm9sZEpzb25wRnVuY3Rpb24iLCJzbGljZSIsInMiLCJWYWxpZGF0ZSIsIm9iaiIsInRyYWNlIiwidGhpcyIsIm51bGxtc2ciLCJSZWZlcmVuY2VFcnJvciIsIm5vdE51bGwiLCJub3RVbmRlZmluZWQiLCJxIiwiZWxlbWVudElkIiwiZWxlbSIsImdldEVsZW1lbnRCeUlkIiwiSHR0cCIsIm1ldGhvZCIsInVybCIsImNvbnRlbnQiLCJjYWxsYmFjayIsImVycm9yQ2FsbGJhY2siLCJjb250ZW50VHlwZSIsIlhNTEh0dHBSZXF1ZXN0IiwidGFyZ2V0VXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInBhdGhuYW1lIiwiaGFzaCIsImxvZyIsIm9wZW4iLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZSIsInJlc3BvbnNlVGV4dCIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiUXVldWUiLCJjb250aW51YXRpb24iLCJxdWV1ZSIsIkFycmF5Iiwic3RhcnRlZCIsIm5leHQiLCJwb3AiLCJyZXZlcnNlIiwiZGF0YUNhbGxiYWNrIiwicHJvZ3Jlc3NDYWxsYmFjayIsInByb2Nlc3NpbmdDb21wbGV0ZWRDYWxsYmFjayIsIkNIVU5LX1NJWkVfSU5fQllURVMiLCJzdGFydCIsImVuZCIsIm51bUNodW5rcyIsImNodW5rQ291bnRlciIsImlucHV0RmlsZSIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwiZ2V0RmlsZVJlYWRPbkxvYWRIYW5kbGVyIiwic3RhcnRUaW1lIiwiRGF0ZSIsIk1hdGgiLCJyb3VuZCIsInNpemUiLCJyZWFkIiwiVWludDhBcnJheSIsInJlc3VsdCIsInJlYWRBc0FycmF5QnVmZmVyIiwiY2hpbGRyZW4iLCJyZW1vdmVDaGlsZCIsImhhc2hMaXN0IiwiaW5wdXRGaWxlc0FyZWEiLCJpbm5lckhUTUwiLCJidG4iLCJvbmNsaWNrIiwiXyIsImRpc2FibGVkIiwic3VibWl0SGFzaGVzIiwic3RyaW5naWZ5IiwiaGFzaGVzIiwicG9zdEhhc2hlc1Jlc3BvbnNlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNob3dJZHBMb2dpbkJ1dHRvbnMiLCJwYXJlbnROb2RlIiwidGVtcGxhdGUiLCJraWxsQWxsQ2hpbGRyZW4iLCJwcm92aWRlcnMiLCJuZXdJZHBCdXR0b24iLCJpbnNlcnRCZWZvcmUiLCJmaWxlIiwiaW5kZXgiLCJjYXJkRWxlbWVudCIsInBlcmNlbnRDb21wbGV0ZWQiLCJyZW5kZXJDYXJkVGVtcGxhdGUiLCJ3YXNtSGFzaGVyIiwiaGV4X2RpZ2VzdCIsImhhc2hWYWx1ZSIsImZpbGVzRWxlbWVudCIsImZpbGVzIiwiYWxlcnQiLCJ1cGRhdGVGaWxlc0FyZWEiLCJlcnJvckVsZW1lbnQiLCJzaWduaW5nUmVzcG9uc2VTdHJpbmciLCJnZXRJdGVtIiwiaWRfdG9rZW4iLCJnZXRJZFRva2VuRnJvbUdldFBhcmFtZXRlcnMiLCJzZWVkIiwic2FsdCIsInNob3dEb3dubG9hZEJ1dHRvbiIsInBhcmFtTGlzdCIsInNwbGl0IiwicGFyYW0iLCJtc2ciLCJuZXdCdXR0b24iLCJzaWduYXR1cmUiLCJuZXdFbGVtZW50IiwiU2hhMjU2aGFzaGVyIiwicHJvY2Vzc0ZpbGVCdXR0b24iLCJmaWxlTGlzdCIsImdldEZpbGVzRnJvbUVsZW1lbnQiLCJoYXNoZXJzUXVldWUiLCJzaG93U3VibWlzc2lvbkJ1dHRvbiIsIm5vdE51bGxOb3RVbmRlZmluZWQiLCJjYXJkRGVjayIsIm5ld0NhcmQiLCJpZCIsImFkZCIsInVwZGF0ZSIsImVycm9ySGFuZGxpbmdDYWxsYmFjayIsInByb2dyZXNzQ2FsbGJhY2tCdWlsZGVyIiwicHJvY2Vzc2luZ0NvbXBsZXRlZEJ1aWxkZXIiLCJwcm9jZXNzQ2h1bmtzIiwicHJvY2Vzc0ZpbGVCdXR0b25IYW5kbGVyIiwiaW5jbHVkZXMiLCJoYW5kbGUiLCJsb2FkIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFXSCxFQUFLLEdBQ2hCSSxFQUFjSixFQUFLLEdBS0FLLEVBQUksRUFBR0MsRUFBVyxHQUNwQ0QsRUFBSUYsRUFBU0ksT0FBUUYsSUFDekJILEVBQVVDLEVBQVNFLEdBQ2hCRyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLQyxFQUFpQlYsSUFBWVUsRUFBZ0JWLElBQ3BGSSxFQUFTTyxLQUFLRCxFQUFnQlYsR0FBUyxJQUV4Q1UsRUFBZ0JWLEdBQVcsRUFFNUIsSUFBSUQsS0FBWUcsRUFDWkksT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1AsRUFBYUgsS0FDcERhLEVBQVFiLEdBQVlHLEVBQVlILElBS2xDLElBRkdjLEdBQXFCQSxFQUFvQmYsR0FFdENNLEVBQVNDLFFBQ2RELEVBQVNVLE9BQVRWLEdBT0YsSUFBSVcsRUFBbUIsR0FLbkJMLEVBQWtCLENBQ3JCTSxFQUFHLEdBV0osSUFBSUMsRUFBdUIsR0FJM0IsSUFBSUMs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QU8sSUFBSS9ELFdBQVcsS0FFckMsRUFBR2dFLHNCQUNILEVBQUdDLHdCQUF3QnhDLEVBQU1sTSxHQUNqQyxFQUFHMk8sMkJBQTJCdkYsRUFBa0IwQixFQUFVb0IsRUFBTWxNLEVBQUd1TSxJQUNyRXFDLGNBQWNiLEVBQVMvTixNQUlyQ2lPLEVBQWF0RSxTRXRQVGtGLENBQXlCLElBQUloQixFQUFhQSxpQkFLdEQsVyxrQ0FDTzdMLFNBQVNpRyxTQUFTRyxTQUFTMEcsU0FBUyxTQUNuQyxRQUFZLDZCQUVSOU0sU0FBU2lHLFNBQVNHLFNBQVMwRyxTQUFTLGFBQ3hDLEVBQUdDLFlBSVhDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdH07XG5cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cblxuXG4gXHQvLyBzY3JpcHQgcGF0aCBmdW5jdGlvblxuIFx0ZnVuY3Rpb24ganNvbnBTY3JpcHRTcmMoY2h1bmtJZCkge1xuIFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5idW5kbGUuanNcIlxuIFx0fVxuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIHdhc20gbW9kdWxlc1xuIFx0dmFyIGluc3RhbGxlZFdhc21Nb2R1bGVzID0ge307XG5cbiBcdGZ1bmN0aW9uIHByb21pc2VSZXNvbHZlKCkgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IH1cblxuIFx0dmFyIHdhc21JbXBvcnRPYmplY3RzID0ge1xuIFx0XHQyOiBmdW5jdGlvbigpIHtcbiBcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XCIuL2luZGV4LmpzXCI6IHtcbiBcdFx0XHRcdFx0XCJfX3diaW5kZ2VuX3Rocm93XCI6IGZ1bmN0aW9uKHAwaTMyLHAxaTMyKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbMV0uZXhwb3J0c1tcIl9fd2JpbmRnZW5fdGhyb3dcIl0ocDBpMzIscDFpMzIpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fSxcbiBcdH07XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQpIHtcbiBcdFx0dmFyIHByb21pc2VzID0gW107XG5cblxuIFx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cbiBcdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG4gXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuIFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF07XG4gXHRcdFx0XHR9KTtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cbiBcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbiBcdFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRcdHZhciBvblNjcmlwdENvbXBsZXRlO1xuXG4gXHRcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4gXHRcdFx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcbiBcdFx0XHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG4gXHRcdFx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdHNjcmlwdC5zcmMgPSBqc29ucFNjcmlwdFNyYyhjaHVua0lkKTtcblxuIFx0XHRcdFx0Ly8gY3JlYXRlIGVycm9yIGJlZm9yZSBzdGFjayB1bndvdW5kIHRvIGdldCB1c2VmdWwgc3RhY2t0cmFjZSBsYXRlclxuIFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG4gXHRcdFx0XHRvblNjcmlwdENvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gXHRcdFx0XHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cbiBcdFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiBcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuIFx0XHRcdFx0XHR2YXIgY2h1bmsgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHRcdFx0XHRcdGlmKGNodW5rICE9PSAwKSB7XG4gXHRcdFx0XHRcdFx0aWYoY2h1bmspIHtcbiBcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG4gXHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcbiBcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcbiBcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuIFx0XHRcdFx0XHRcdFx0Y2h1bmtbMV0oZXJyb3IpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH07XG4gXHRcdFx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiBcdFx0XHRcdFx0b25TY3JpcHRDb21wbGV0ZSh7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSk7XG4gXHRcdFx0XHR9LCAxMjAwMDApO1xuIFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZTtcbiBcdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBGZXRjaCArIGNvbXBpbGUgY2h1bmsgbG9hZGluZyBmb3Igd2ViYXNzZW1ibHlcblxuIFx0XHR2YXIgd2FzbU1vZHVsZXMgPSB7XCIxXCI6WzJdfVtjaHVua0lkXSB8fCBbXTtcblxuIFx0XHR3YXNtTW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHdhc21Nb2R1bGVJZCkge1xuIFx0XHRcdHZhciBpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSA9IGluc3RhbGxlZFdhc21Nb2R1bGVzW3dhc21Nb2R1bGVJZF07XG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiIG9yIFwiYWxyZWFkeSBsb2FkZWRcIi5cbiBcdFx0XHRpZihpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSlcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkV2FzbU1vZHVsZURhdGEpO1xuIFx0XHRcdGVsc2Uge1xuIFx0XHRcdFx0dmFyIGltcG9ydE9iamVjdCA9IHdhc21JbXBvcnRPYmplY3RzW3dhc21Nb2R1bGVJZF0oKTtcbiBcdFx0XHRcdHZhciByZXEgPSBmZXRjaChfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsge1wiMlwiOlwiMGFmZWIxYzc2NDI0NGViMTNlNDBcIn1bd2FzbU1vZHVsZUlkXSArIFwiLm1vZHVsZS53YXNtXCIpO1xuIFx0XHRcdFx0dmFyIHByb21pc2U7XG4gXHRcdFx0XHRpZihpbXBvcnRPYmplY3QgaW5zdGFuY2VvZiBQcm9taXNlICYmIHR5cGVvZiBXZWJBc3NlbWJseS5jb21waWxlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gXHRcdFx0XHRcdHByb21pc2UgPSBQcm9taXNlLmFsbChbV2ViQXNzZW1ibHkuY29tcGlsZVN0cmVhbWluZyhyZXEpLCBpbXBvcnRPYmplY3RdKS50aGVuKGZ1bmN0aW9uKGl0ZW1zKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGl0ZW1zWzBdLCBpdGVtc1sxXSk7XG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fSBlbHNlIGlmKHR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyA9PT0gJ2Z1bmN0aW9uJykge1xuIFx0XHRcdFx0XHRwcm9taXNlID0gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcocmVxLCBpbXBvcnRPYmplY3QpO1xuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0dmFyIGJ5dGVzUHJvbWlzZSA9IHJlcS50aGVuKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYXJyYXlCdWZmZXIoKTsgfSk7XG4gXHRcdFx0XHRcdHByb21pc2UgPSBieXRlc1Byb21pc2UudGhlbihmdW5jdGlvbihieXRlcykge1xuIFx0XHRcdFx0XHRcdHJldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShieXRlcywgaW1wb3J0T2JqZWN0KTtcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZFdhc21Nb2R1bGVzW3dhc21Nb2R1bGVJZF0gPSBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gXHRcdFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLndbd2FzbU1vZHVsZUlkXSA9IChyZXMuaW5zdGFuY2UgfHwgcmVzKS5leHBvcnRzO1xuIFx0XHRcdFx0fSkpO1xuIFx0XHRcdH1cbiBcdFx0fSk7XG4gXHRcdHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIG9uIGVycm9yIGZ1bmN0aW9uIGZvciBhc3luYyBsb2FkaW5nXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm9lID0gZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgdGhyb3cgZXJyOyB9O1xuXG4gXHQvLyBvYmplY3Qgd2l0aCBhbGwgV2ViQXNzZW1ibHkuaW5zdGFuY2UgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy53ID0ge307XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNsYXNzIFZhbGlkYXRlIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBudWxsbXNnID0gXCJFcnJvcjogb2JqZWN0IHdhcyBudWxsXCI7XG4gICAgcHVibGljIHN0YXRpYyBub3ROdWxsPFQ+KG9iajogVCk6IG9iaiBpcyBFeGNsdWRlPFQsIG51bGw+IHtcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLnRyYWNlKHRoaXMubnVsbG1zZyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IodGhpcy5udWxsbXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIG5vdFVuZGVmaW5lZDxUPihvYmo6IFQpOiBvYmogaXMgRXhjbHVkZTxULCB1bmRlZmluZWQ+IHtcbiAgICAgICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoYEVycm9yOiBPYmplY3QgJHtvYmp9IHdhcyB1bmRlZmluZWRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIG5vdE51bGxOb3RVbmRlZmluZWQ8VD4ob2JqOiBUKTogb2JqIGlzIE5vbk51bGxhYmxlPFQ+IHtcbiAgICAgICAgcmV0dXJuIFZhbGlkYXRlLm5vdE51bGwob2JqKSAmJiBWYWxpZGF0ZS5ub3RVbmRlZmluZWQob2JqKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gcShlbGVtZW50SWQ6IHN0cmluZyk6IEV4Y2x1ZGU8SFRNTEVsZW1lbnQsIG51bGw+IHtcbiAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgICBpZiAoZWxlbSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgRXJyb3I6IEVsZW1lbnQgd2l0aCBpZCBcIiR7ZWxlbWVudElkfVwiIGRvZXMgbm90IGV4aXN0YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEh0dHAge1xuICAgIHB1YmxpYyBzdGF0aWMgcmVxdWVzdDxUPihcbiAgICAgICAgbWV0aG9kOiAnR0VUJyB8ICdQT1NUJyxcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIGNvbnRlbnQ/OiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrPzogKHJlc3BvbnNlOiBUKSA9PiB2b2lkLFxuICAgICAgICBlcnJvckNhbGxiYWNrPzogKGVycjogYW55KSA9PiB2b2lkLFxuICAgICAgICBjb250ZW50VHlwZT86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGNvbnN0IG15SG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCAnJykucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaGFzaCwgJycpO1xuICAgICAgICBjb25zdCB0YXJnZXRVcmwgPSBgJHtteUhvc3R9LyR7dXJsfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKG1ldGhvZCArIFwiIFwiICsgdGFyZ2V0VXJsKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdGFyZ2V0VXJsLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSBhcyBUKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5zZW5kKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVxdWVzdFByb21pc2U8VD4oXG4gICAgICAgIG1ldGhvZDogJ0dFVCcgfCAnUE9TVCcsXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBjb250ZW50ID86IHN0cmluZ1xuICAgICk6IFByb21pc2U8VD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KG1ldGhvZCwgdXJsLCBjb250ZW50LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGxhYmxlLCBDb250aW51YWJsZX0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuXG5leHBvcnQgY2xhc3MgUXVldWUge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcXVldWUgPSBBcnJheTxDYWxsYWJsZT4oKTtcbiAgICBwcml2YXRlIGNvbnRpbnVhdGlvbjogQ2FsbGFibGU7XG4gICAgcHJpdmF0ZSBzdGFydGVkOiBCb29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250aW51YXRpb246IENhbGxhYmxlKSB7XG4gICAgICAgIHRoaXMuY29udGludWF0aW9uID0gY29udGludWF0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQoYzogQ29udGludWFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgaWYgKG5leHQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYyhuZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYyh0aGlzLmNvbnRpbnVhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1ZXVlLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMucXVldWUucG9wKCk7XG4gICAgICAgIGlmIChjICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYygpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtWYWxpZGF0ZX0gZnJvbSBcIi4vdmFsaWRhdGVcIjtcbmltcG9ydCB7U2hhMjU2aGFzaGVyfSBmcm9tIFwiLi4vcGtnXCI7XG5pbXBvcnQge3F9IGZyb20gXCIuL3RzUXVlcnlcIjtcbmltcG9ydCB7XG4gICAgQ2FsbGFibGUsXG4gICAgRXJyb3JDYWxsYmFjayxcbiAgICBGaWxlQ2h1bmtEYXRhQ2FsbGJhY2ssXG4gICAgRmlsZVJlYWRlck9uTG9hZENhbGxiYWNrLFxuICAgIFBvb3JQZW9wbGVQZXJzaXN0ZW5jZSxcbiAgICBQb3N0SGFzaGVzUmVzcG9uc2UsXG4gICAgUHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrLFxuICAgIFByb2dyZXNzQ2FsbGJhY2tcbn0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHtIdHRwfSBmcm9tIFwiLi9odHRwXCI7XG5pbXBvcnQge1F1ZXVlfSBmcm9tIFwiLi9jYWxsYmFja0hlbGxDaGFpbmVyXCI7XG5cblxuY2xhc3MgRmlsZUluQ2h1bmtzUHJvY2Vzc29yIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgQ0hVTktfU0laRV9JTl9CWVRFUzogbnVtYmVyID0gMTAyNCAqIDEwMDAgKiAyMDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZpbGVSZWFkZXI6IEZpbGVSZWFkZXI7XG4gICAgcHJpdmF0ZSByZWFkb25seSBkYXRhQ2FsbGJhY2s6IEZpbGVDaHVua0RhdGFDYWxsYmFjaztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVycm9yQ2FsbGJhY2s6IEVycm9yQ2FsbGJhY2s7XG4gICAgcHJpdmF0ZSByZWFkb25seSBwcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2s6IFByb2Nlc3NpbmdDb21wbGV0ZWRDYWxsYmFjaztcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByb2dyZXNzQ2FsbGJhY2s6IFByb2dyZXNzQ2FsbGJhY2s7XG4gICAgcHJpdmF0ZSBzdGFydDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGVuZDogbnVtYmVyID0gdGhpcy5zdGFydCArIHRoaXMuQ0hVTktfU0laRV9JTl9CWVRFUztcbiAgICBwcml2YXRlIHN0YXJ0VGltZT86IERhdGU7XG4gICAgcHJpdmF0ZSBudW1DaHVua3M6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBjaHVua0NvdW50ZXI6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBpbnB1dEZpbGU6IEZpbGUgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKGRhdGFDYWxsYmFjazogRmlsZUNodW5rRGF0YUNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2s6IEVycm9yQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjazogUHJvZ3Jlc3NDYWxsYmFjayxcbiAgICAgICAgICAgICAgICBwcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2s6IENhbGxhYmxlKSB7XG4gICAgICAgIHRoaXMuZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHRoaXMuZmlsZVJlYWRlci5vbmxvYWQgPSB0aGlzLmdldEZpbGVSZWFkT25Mb2FkSGFuZGxlcigpO1xuICAgICAgICB0aGlzLmRhdGFDYWxsYmFjayA9IGRhdGFDYWxsYmFjaztcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrID0gZXJyb3JDYWxsYmFjaztcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2sgPSBwcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NDYWxsYmFjayA9IHByb2dyZXNzQ2FsbGJhY2s7XG4gICAgfVxuXG4gICAgcHVibGljIHByb2Nlc3NDaHVua3MoaW5wdXRGaWxlOiBGaWxlKSB7XG4gICAgICAgIHRoaXMuaW5wdXRGaWxlID0gaW5wdXRGaWxlO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRoaXMubnVtQ2h1bmtzID0gTWF0aC5yb3VuZCh0aGlzLmlucHV0RmlsZS5zaXplIC8gdGhpcy5DSFVOS19TSVpFX0lOX0JZVEVTKTtcbiAgICAgICAgdGhpcy5yZWFkKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgZ2V0RmlsZVJlYWRPbkxvYWRIYW5kbGVyKCk6IEZpbGVSZWFkZXJPbkxvYWRDYWxsYmFjayB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbCh0aGlzLmlucHV0RmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFDYWxsYmFjayhuZXcgVWludDhBcnJheSgodGhpcy5maWxlUmVhZGVyLnJlc3VsdCBhcyBBcnJheUJ1ZmZlcikpKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLmVuZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmQgPCB0aGlzLmlucHV0RmlsZS5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gdGhpcy5zdGFydCArIHRoaXMuQ0hVTktfU0laRV9JTl9CWVRFUztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzc0NhbGxiYWNrKE1hdGgucm91bmQoKHRoaXMuY2h1bmtDb3VudGVyIC8gdGhpcy5udW1DaHVua3MpICogMTAwKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZCh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWQoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwodGhpcy5pbnB1dEZpbGUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodGhpcy5pbnB1dEZpbGUuc2xpY2Uoc3RhcnQsIGVuZCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBUUyB7XG4gICAgcHVibGljIHN0YXRpYyBraWxsQWxsQ2hpbGRyZW4oZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgd2hpbGUgKGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZS5yZW1vdmVDaGlsZChlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2hvd1N1Ym1pc3Npb25CdXR0b24oaGFzaExpc3Q6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgY29uc3QgaW5wdXRGaWxlc0FyZWEgPSBxKFwiaW5wdXQtZmlsZXMtYXJlYVwiKTtcbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoaW5wdXRGaWxlc0FyZWEpKSB7XG4gICAgICAgICAgICBpbnB1dEZpbGVzQXJlYS5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJsZWFkXCI+SGFzaGluZyBjb21wbGV0ZWQuIENvbnRpbnVlIHdoZW4gcmVhZHk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWJsb2NrIGJ0bi1vdXRsaW5lLXByaW1hcnlcIiBpZD1cInN1Ym1pdGhhc2hlc1wiPlN1Ym1pdCBmb3Igc2lnbmluZzwvYnV0dG9uPmA7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBxKFwic3VibWl0aGFzaGVzXCIpO1xuICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoYnRuKSkge1xuICAgICAgICAgICAgICAgIChidG4gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLm9uY2xpY2sgPSAoXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAoYnRuIGFzIEhUTUxCdXR0b25FbGVtZW50KS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0SGFzaGVzKGhhc2hMaXN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHN1Ym1pdEhhc2hlcyhoYXNoTGlzdDogQXJyYXk8c3RyaW5nPikge1xuICAgICAgICBIdHRwLnJlcXVlc3Q8UG9zdEhhc2hlc1Jlc3BvbnNlPignUE9TVCcsXG4gICAgICAgICAgICAnL2FwaS92MS9oYXNoZXMvJyxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBoYXNoZXM6IGhhc2hMaXN0XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcDogUG9vclBlb3BsZVBlcnNpc3RlbmNlID0ge1xuICAgICAgICAgICAgICAgICAgICBwb3N0SGFzaGVzUmVzcG9uc2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBoYXNoZXM6IGhhc2hMaXN0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9sbm9nZW5lcmljcycsIEpTT04uc3RyaW5naWZ5KHApKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dJZHBMb2dpbkJ1dHRvbnMocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVyciA9PiBjb25zb2xlLmxvZyhgZXJyb3IgJHtlcnJ9YCksXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBjb25zb2xlLmxvZyhgUE9TVCAke2hhc2hMaXN0fWApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2hvd0lkcExvZ2luQnV0dG9ucyhyZXNwb25zZTogUG9zdEhhc2hlc1Jlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsZXNBcmVhID0gcShcImlucHV0LWZpbGVzLWFyZWFcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmdTEnKTtcbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoaW5wdXRGaWxlc0FyZWEpKSB7XG4gICAgICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChpbnB1dEZpbGVzQXJlYS5wYXJlbnROb2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmdTInKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGA8cCBjbGFzcz1cImxlYWRcIj5QbGVhc2Ugc2VsZWN0IHdob20gdG8gYXV0aGVudGljYXRlIHdpdGg8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIklEUFVSTFwiIGNsYXNzPVwiYnV0dG9uIGJ0biBidG4tYmxvY2sgYnRuLW91dGxpbmUtcHJpbWFyeVwiPklEUE5BTUU8L2E+YDtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbGxBbGxDaGlsZHJlbihpbnB1dEZpbGVzQXJlYSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2UucHJvdmlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmdTMnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRwQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0lkcEJ1dHRvbi5pbm5lckhUTUwgPSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0lEUFVSTCcsIHJlc3BvbnNlLnByb3ZpZGVyc1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0lEUE5BTUUnLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEZpbGVzQXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdJZHBCdXR0b24sIGlucHV0RmlsZXNBcmVhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcHJvZ3Jlc3NDYWxsYmFja0J1aWxkZXIoZmlsZTogRmlsZSwgaW5kZXg6IG51bWJlcik6XG4gICAgICAgIFByb2dyZXNzQ2FsbGJhY2sge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHEoYGZpbGUuJHtpbmRleH1gKTtcbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoY2FyZEVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHBlcmNlbnRDb21wbGV0ZWQgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LmlubmVySFRNTCA9IHRoaXMucmVuZGVyQ2FyZFRlbXBsYXRlKGZpbGUsIGAke3BlcmNlbnRDb21wbGV0ZWR9JWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKF8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FyZEVsZW1lbnQgZmlsZS4ke2luZGV4fSB3YXMgbnVsbCwgY2Fubm90IHVwZGF0ZSBwcm9ncmVzc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBwcm9jZXNzaW5nQ29tcGxldGVkQnVpbGRlcihuZXh0OiBDYWxsYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hMaXN0OiBBcnJheTxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXNtSGFzaGVyOiBTaGEyNTZoYXNoZXJcbiAgICApOiBDYWxsYWJsZSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcShgZmlsZS4ke2luZGV4fWApO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChjYXJkRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IHdhc21IYXNoZXIuaGV4X2RpZ2VzdCgpO1xuICAgICAgICAgICAgICAgIGhhc2hMaXN0LnB1c2goaGFzaCk7XG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJDYXJkVGVtcGxhdGUoZmlsZSwgaGFzaCk7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FyZEVsZW1lbnQgZmlsZS4ke2luZGV4fSB3YXMgbnVsbCwgY2Fubm90IHVwZGF0ZSBwcm9ncmVzc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZW5kZXJDYXJkVGVtcGxhdGUoZmlsZTogRmlsZSwgaGFzaFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjYXJkIG1iLTQgYm94LXNoYWRvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibXktMCBmb250LXdlaWdodC1ub3JtYWxcIj5GSUxFTkFNRTwvaDU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG10LTMgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGk+U2l6ZTogRklMRVNJWkU8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+VHlwZTogRklMRVRZUEU8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+SGFzaDogRklMRUhBU0g8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG48IS0tICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1ibG9jayBidG4tZGFuZ2VyXCI+UmVtb3ZlIGZpbGU8L2J1dHRvbj4tLT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAucmVwbGFjZShcIkZJTEVOQU1FXCIsIGZpbGUubmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiRklMRVNJWkVcIiwgZmlsZS5zaXplIDwgMTAyNCAqIDEwMjQgPyBgJHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQpfSBLQmAgOiBgJHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0KX0gTUJgKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCJGSUxFVFlQRVwiLCBmaWxlLnR5cGUgIT0gXCJcIiA/IGZpbGUudHlwZSA6IFwiVW5rbm93blwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCJGSUxFSEFTSFwiLCBoYXNoVmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmlsZXNGcm9tRWxlbWVudChlbGVtZW50SWQ6IHN0cmluZyk6IEZpbGVMaXN0IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgZmlsZXNFbGVtZW50ID0gcShlbGVtZW50SWQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoZmlsZXNFbGVtZW50LmZpbGVzKSkge1xuICAgICAgICAgICAgaWYgKGZpbGVzRWxlbWVudC5maWxlcy5sZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUb28gZmV3IGZpbGVzIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBmaWxlLlwiKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbGVzQXJlYShcIldhaXQgZm9yIGhhc2hpbmcgdG8gZmluaXNoXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmlsZXNFbGVtZW50LmZpbGVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB1cGRhdGVGaWxlc0FyZWEobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsZXNBcmVhID0gcShcImlucHV0LWZpbGVzLWFyZWFcIik7XG4gICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKGlucHV0RmlsZXNBcmVhKSkge1xuICAgICAgICAgICAgaW5wdXRGaWxlc0FyZWEuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwibGVhZFwiPiR7bWVzc2FnZX08L3A+YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZXJyb3JIYW5kbGluZ0NhbGxiYWNrKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBxKFwiZXJyb3JcIik7XG4gICAgICAgIGVycm9yRWxlbWVudC5pbm5lckhUTUwgPSBgJHtlcnJvckVsZW1lbnQuaW5uZXJIVE1MfSA8cD4ke21lc3NhZ2V9PC9wPmA7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRmlsZUJ1dHRvbkhhbmRsZXIod2FzbUhhc2hlcjogU2hhMjU2aGFzaGVyKSB7XG4gICAgY29uc3QgZmlsZUxpc3QgPSBUUy5nZXRGaWxlc0Zyb21FbGVtZW50KFwiZmlsZVwiKTtcbiAgICBjb25zdCBoYXNoTGlzdCA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gICAgY29uc3QgaGFzaGVyc1F1ZXVlID0gbmV3IFF1ZXVlKCgpID0+IHtcbiAgICAgICAgVFMuc2hvd1N1Ym1pc3Npb25CdXR0b24oaGFzaExpc3QpXG4gICAgfSk7XG5cbiAgICBpZiAoVmFsaWRhdGUubm90TnVsbE5vdFVuZGVmaW5lZChmaWxlTGlzdCkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVMaXN0W2ldO1xuICAgICAgICAgICAgY29uc3QgY2FyZERlY2sgPSBxKCdjYXJkYXJlYScpO1xuICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGxOb3RVbmRlZmluZWQoY2FyZERlY2spKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIG5ld0NhcmQuaWQgPSBgZmlsZS4ke2l9YDtcbiAgICAgICAgICAgICAgICBuZXdDYXJkLmlubmVySFRNTCA9IFRTLnJlbmRlckNhcmRUZW1wbGF0ZShmaWxlLCAnUXVldWVkJyk7XG4gICAgICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoY2FyZERlY2sucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZERlY2sucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Q2FyZCwgY2FyZERlY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFzaGVyc1F1ZXVlLmFkZChcbiAgICAgICAgICAgICAgICAobmV4dDogQ2FsbGFibGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGVJbkNodW5rc1Byb2Nlc3NvcigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc21IYXNoZXIudXBkYXRlKG5ldyBVaW50OEFycmF5KChkYXRhKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFRTLmVycm9ySGFuZGxpbmdDYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIFRTLnByb2dyZXNzQ2FsbGJhY2tCdWlsZGVyKGZpbGUsIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgVFMucHJvY2Vzc2luZ0NvbXBsZXRlZEJ1aWxkZXIobmV4dCBhcyBDYWxsYWJsZSwgaGFzaExpc3QsIGZpbGUsIGksIHdhc21IYXNoZXIpXG4gICAgICAgICAgICAgICAgICAgICkucHJvY2Vzc0NodW5rcyhmaWxlTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoZXJzUXVldWUuc3RhcnQoKTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7VmFsaWRhdGV9IGZyb20gXCIuL3ZhbGlkYXRlXCI7XG5pbXBvcnQge1Bvb3JQZW9wbGVQZXJzaXN0ZW5jZX0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHtIdHRwfSBmcm9tIFwiLi9odHRwXCI7XG5pbXBvcnQge3F9IGZyb20gXCIuL3RzUXVlcnlcIjtcbmltcG9ydCB7VFN9IGZyb20gXCIuL2ZpbGVJbkNodW5rUHJvY2Vzc29yXCI7XG5cbmludGVyZmFjZSBTaWduaW5nUmVxdWVzdCB7XG4gICAgaWRfdG9rZW46IHN0cmluZyxcbiAgICBzZWVkOiBzdHJpbmcsXG4gICAgc2FsdDogc3RyaW5nLFxuICAgIGhhc2hlczogQXJyYXk8c3RyaW5nPlxufVxuXG5pbnRlcmZhY2UgU2lnbmluZ1Jlc3BvbnNlIHtcbiAgICBzaWduYXR1cmU6IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgQ0Ige1xuICAgIHB1YmxpYyBzdGF0aWMgaGFuZGxlKCkge1xuICAgICAgICBjb25zdCBzaWduaW5nUmVzcG9uc2VTdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9sbm9nZW5lcmljcycpO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChzaWduaW5nUmVzcG9uc2VTdHJpbmcpKSB7XG4gICAgICAgICAgICBjb25zdCBwOiBQb29yUGVvcGxlUGVyc2lzdGVuY2UgPSBKU09OLnBhcnNlKHNpZ25pbmdSZXNwb25zZVN0cmluZyk7XG4gICAgICAgICAgICBjb25zdCByZXE6IFNpZ25pbmdSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGlkX3Rva2VuOiB0aGlzLmdldElkVG9rZW5Gcm9tR2V0UGFyYW1ldGVycygpLFxuICAgICAgICAgICAgICAgIHNlZWQ6IHAucG9zdEhhc2hlc1Jlc3BvbnNlLnNlZWQsXG4gICAgICAgICAgICAgICAgc2FsdDogcC5wb3N0SGFzaGVzUmVzcG9uc2Uuc2FsdCxcbiAgICAgICAgICAgICAgICBoYXNoZXM6IHAuaGFzaGVzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgSHR0cC5yZXF1ZXN0PFNpZ25pbmdSZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgXCIvYXBpL3YxL3NpZ25cIixcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShyZXEpLFxuICAgICAgICAgICAgICAgIChyZXNwb25zZSkgPT4gQ0Iuc2hvd0Rvd25sb2FkQnV0dG9uKHJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICBlcnIgPT4gY29uc29sZS5sb2coXCJlcnJvciBcIiArIGVyciksXG4gICAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldElkVG9rZW5Gcm9tR2V0UGFyYW1ldGVycygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBwYXJhbUxpc3QgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzFdLnNwbGl0KCcmJyk7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBwYXJhbUxpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gcy5zcGxpdCgnPScpO1xuICAgICAgICAgICAgaWYgKHBhcmFtWzBdID09ICdpZF90b2tlbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1bMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbXNnID0gJ0ZvdW5kIG5vIGlkX3Rva2VuIGluIHVybCc7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzaG93RG93bmxvYWRCdXR0b24ocmVzcG9uc2U6IFNpZ25pbmdSZXNwb25zZSkge1xuICAgICAgICBjb25zdCBpbnB1dEZpbGVzQXJlYSA9IHEoXCJpbnB1dC1maWxlcy1hcmVhXCIpO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChpbnB1dEZpbGVzQXJlYSkpIHtcbiAgICAgICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKGlucHV0RmlsZXNBcmVhLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBgPHAgY2xhc3M9XCJsZWFkXCI+U2lnbmF0dXJlIGNyZWF0aW9uIHN1Y2Nlc3NmdWwhPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJTSUdOQVRVUkVVUkxcIiBjbGFzcz1cImJ1dHRvbiBidG4gYnRuLWJsb2NrIGJ0bi1vdXRsaW5lLXByaW1hcnlcIj5Eb3dubG9hZDwvYT5gO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIFRTLmtpbGxBbGxDaGlsZHJlbihpbnB1dEZpbGVzQXJlYSk7XG4gICAgICAgICAgICAgICAgbmV3QnV0dG9uLmlubmVySFRNTCA9IHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdTSUdOQVRVUkVVUkwnLCByZXNwb25zZS5zaWduYXR1cmUpXG4gICAgICAgICAgICAgICAgaW5wdXRGaWxlc0FyZWEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3QnV0dG9uLCBpbnB1dEZpbGVzQXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNob3dFcnJvck1lc3NhZ2UoZXJyb3I6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpbnB1dEZpbGVzQXJlYSA9IHEoXCJpbnB1dC1maWxlcy1hcmVhXCIpO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChpbnB1dEZpbGVzQXJlYSkpIHtcbiAgICAgICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKGlucHV0RmlsZXNBcmVhLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBgPHAgY2xhc3M9XCJsZWFkXCI+U2lnbmF0dXJlIGNyZWF0aW9uIGZhaWxlZDogRVJST1I8L3A+YDtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgVFMua2lsbEFsbENoaWxkcmVuKGlucHV0RmlsZXNBcmVhKTtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdFUlJPUicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBpbnB1dEZpbGVzQXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdFbGVtZW50LCBpbnB1dEZpbGVzQXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHtWYWxpZGF0ZX0gZnJvbSBcIi4vdmFsaWRhdGVcIjtcbmltcG9ydCB7cHJvY2Vzc0ZpbGVCdXR0b25IYW5kbGVyfSBmcm9tIFwiLi9maWxlSW5DaHVua1Byb2Nlc3NvclwiXG5pbXBvcnQge0NCfSBmcm9tIFwiLi9jYWxsYmFja1wiO1xuXG5mdW5jdGlvbiBzdGFydChTaGEyNTZoYXNoZXI6IHR5cGVvZiBpbXBvcnQoJy4uL3BrZycpKSB7XG4gICAgY29uc3QgcHJvY2Vzc0ZpbGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2Nlc3MtZmlsZVwiKTtcbiAgICBpZiAoVmFsaWRhdGUubm90TnVsbChwcm9jZXNzRmlsZUJ1dHRvbikpIHtcbiAgICAgICAgcHJvY2Vzc0ZpbGVCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIChwcm9jZXNzRmlsZUJ1dHRvbiBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcHJvY2Vzc0ZpbGVCdXR0b25IYW5kbGVyKG5ldyBTaGEyNTZoYXNoZXIuU2hhMjU2aGFzaGVyKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBsb2FkKCkge1xuICAgIGlmKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKFwiaW5kZXhcIikpIHtcbiAgICAgICAgc3RhcnQoYXdhaXQgaW1wb3J0KFwiLi4vcGtnXCIpKTtcbiAgICB9XG4gICAgZWxzZSBpZihkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcyhcImNhbGxiYWNrXCIpKXtcbiAgICAgICAgQ0IuaGFuZGxlKCk7XG4gICAgfVxufVxuXG5sb2FkKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9