!function(e){function t(t){for(var n,o,r=t[0],i=t[1],l=0,a=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&a.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);a.length;)a.shift()()}var n={},s={0:0};var o={};var r={2:function(){return{"./index.js":{__wbindgen_throw:function(e,t){return n[1].exports.__wbindgen_throw(e,t)}}}}};function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var l=new Promise((function(t,o){n=s[e]=[t,o]}));t.push(n[2]=l);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+e+".bundle.js"}(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}s[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return({1:[2]}[e]||[]).forEach((function(e){var n=o[e];if(n)t.push(n);else{var s,l=r[e](),a=fetch(i.p+""+{2:"0afeb1c764244eb13e40"}[e]+".module.wasm");if(l instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)s=Promise.all([WebAssembly.compileStreaming(a),l]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)s=WebAssembly.instantiateStreaming(a,l);else{s=a.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,l)}))}t.push(o[e]=s.then((function(t){return i.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e},i.w={};var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=a;i(i.s=0)}([function(e,t,n){"use strict";n.r(t);class s{static notNull(e){if(null==e)throw console.trace(this.nullmsg),new ReferenceError(this.nullmsg);return!0}static notUndefined(e){if(void 0===e)throw new ReferenceError(`Error: Object ${e} was undefined`);return!0}static notNullNotUndefined(e){return s.notNull(e)&&s.notUndefined(e)}}function o(e){const t=document.getElementById(e);if(null==t)throw new ReferenceError(`Error: Element with id "${e}" does not exist`);return t}s.nullmsg="Error: object was null";class r{static request(e,t,n,s,o,r){const i=new XMLHttpRequest,l=window.location.href.replace(window.location.pathname,"");i.open(e,`${l}/${t}`,!0),i.onload=function(){this.status>=200&&this.status<400?s&&s(JSON.parse(this.response)):o&&o(this.responseText)},i.onerror=function(e){o&&o(e)},"POST"===e&&null!=r&&i.setRequestHeader("Content-Type",r),i.send(n)}static requestPromise(e,t,n){return new Promise((s,o)=>{this.request(e,t,n,s,o)})}}class i{constructor(e){this.queue=Array(),this.started=!1,this.continuation=e}add(e){this.started?console.log("nope"):this.queue.push(()=>{const t=this.queue.pop();e(null!=t?t:this.continuation)})}start(){this.started=!0,this.queue.reverse();const e=this.queue.pop();null!=e&&e()}}class l{constructor(e,t,n,s){this.CHUNK_SIZE_IN_BYTES=2048e4,this.start=0,this.end=this.start+this.CHUNK_SIZE_IN_BYTES,this.numChunks=0,this.chunkCounter=0,this.inputFile=null,this.fileReader=new FileReader,this.fileReader.onload=this.getFileReadOnLoadHandler(),this.dataCallback=e,this.errorCallback=t,this.processingCompletedCallback=s,this.progressCallback=n}processChunks(e){this.inputFile=e,this.startTime=new Date,this.numChunks=Math.round(this.inputFile.size/this.CHUNK_SIZE_IN_BYTES),this.read(this.start,this.end)}getFileReadOnLoadHandler(){return()=>{s.notNull(this.inputFile)&&(this.dataCallback(new Uint8Array(this.fileReader.result)),this.start=this.end,this.end<this.inputFile.size?(this.chunkCounter++,this.end=this.start+this.CHUNK_SIZE_IN_BYTES,this.progressCallback(Math.round(this.chunkCounter/this.numChunks*100)),this.read(this.start,this.end)):this.processingCompletedCallback())}}read(e,t){s.notNull(this.inputFile)&&this.fileReader.readAsArrayBuffer(this.inputFile.slice(e,t))}}class a{static showSubmissionButton(e){const t=o("input-files-area");if(s.notNull(t)){t.innerHTML='<p class="lead">Hashing completed. Continue when ready</p>\n                         <button type="button" class="btn btn-block btn-outline-primary" id="submithashes">Submit for signing</button>';const n=o("submithashes");s.notNull(n)&&(n.onclick=t=>{this.submitHashes(e)})}}static submitHashes(e){r.request("POST","/api/v1/hashes/",JSON.stringify({hashes:e}),t=>{console.log(t);const n={postHashesResponse:t,hashes:e};window.localStorage.setItem("lolnogenerics",JSON.stringify(n)),this.showIdpLoginButtons(t)},e=>console.log(`error ${e}`),"application/json"),console.log(`POST ${e}`)}static showIdpLoginButtons(e){const t=o("input-files-area");if(console.log("fu1"),s.notNull(t)&&s.notNull(t.parentNode)){console.log("fu2");const n='<p class="lead">Please select whom to authenticate with</p>\n                         <a href="IDPURL" class="button btn btn-block btn-outline-primary">IDPNAME</a>';for(;t.children.length>0;)t.removeChild(t.children[0]);for(const s in e.providers){console.log("fu3");const o=document.createElement("div");o.innerHTML=n.replace("IDPURL",e.providers[s]).replace("IDPNAME",s),t.parentNode.insertBefore(o,t)}}}static progressCallbackBuilder(e,t){const n=o(`file.${t}`);return s.notNull(n)?t=>{n.innerHTML=this.renderCardTemplate(e,`${t}%`)}:e=>{console.log(`cardElement file.${t} was null, cannot update progress`)}}static processingCompletedBuilder(e,t,n,r,i){const l=o(`file.${r}`);return s.notNull(l)?()=>{const s=i.hex_digest();t.push(s),l.innerHTML=this.renderCardTemplate(n,s),e()}:()=>{console.log(`cardElement file.${r} was null, cannot update progress`)}}static renderCardTemplate(e,t){return'<div class="card mb-4 box-shadow">\n            <div class="card-header">\n                <h5 class="my-0 font-weight-normal">FILENAME</h5>\n            </div>\n            <div class="card-body">\n                <ul class="list-unstyled mt-3 mb-4">\n                    <li>Size: FILESIZE</li>\n                    <li>Type: FILETYPE</li>\n                    <li>Hash: FILEHASH</li>\n                </ul>\n\x3c!--                <button type="button" class="btn btn-block btn-danger">Remove file</button>--\x3e\n            </div>\n        </div>'.replace("FILENAME",e.name).replace("FILESIZE",e.size<1048576?`${Math.round(e.size/1024)} KB`:`${Math.round(e.size/1024/1024)} MB`).replace("FILETYPE",""!=e.type?e.type:"Unknown").replace("FILEHASH",t)}static getFilesFromElement(e){const t=o(e);if(s.notNull(t.files))return t.files.length<0?alert("Too few files selected. Please select at least one file."):this.updateFilesArea("Wait for hashing to finish"),t.files}static updateFilesArea(e){const t=o("input-files-area");s.notNull(t)&&(t.innerHTML=`<p class="lead">${e}</p>`)}static errorHandlingCallback(e){const t=o("error");t.innerHTML=`${t.innerHTML} <p>${e}</p>`}}class c{static handle(){const e=window.localStorage.getItem("lolnogenerics");if(s.notNull(e)){const t=JSON.parse(e),n={idtoken:this.getIdTokenFromGetParameters(),seed:t.postHashesResponse.seed,salt:t.postHashesResponse.salt,hashes:t.hashes};r.request("POST","/api/v1/sign",JSON.stringify(n),e=>{console.log(e)},e=>console.log("error "+e),"application/json")}}static getIdTokenFromGetParameters(){const e=window.location.href.split("#")[1].split("&");for(const t of e){const e=t.split("=");if("id_token"==e[0])return e[1]}const t="Found no id_token in url";throw console.trace(t),new Error(t)}}var u=function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function l(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}a((s=s.apply(e,t||[])).next())}))};function d(e){const t=document.getElementById("process-file");s.notNull(t)&&(t.onclick=function(){!function(e){const t=a.getFilesFromElement("file"),n=new Array,r=new i(()=>{a.showSubmissionButton(n)});if(s.notNullNotUndefined(t)){for(let i=0;i<t.length;i++){const c=t[i],u=o("cardarea");if(s.notNullNotUndefined(u)){const e=document.createElement("div");e.id=`file.${i}`,e.innerHTML=a.renderCardTemplate(c,"Queued"),s.notNull(u.parentNode)&&u.parentNode.insertBefore(e,u)}r.add(s=>{new l(t=>{e.update(new Uint8Array(t))},a.errorHandlingCallback,a.progressCallbackBuilder(c,i),a.processingCompletedBuilder(s,n,c,i,e)).processChunks(t[i])})}r.start()}}(new e.Sha256hasher)})}!function(){u(this,void 0,void 0,(function*(){document.location.pathname.includes("index")?d(yield n.e(1).then(n.bind(null,1))):document.location.pathname.includes("callback")&&c.handle()}))}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdHMvdmFsaWRhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvdHNRdWVyeS50cyIsIndlYnBhY2s6Ly8vLi90cy9odHRwLnRzIiwid2VicGFjazovLy8uL3RzL2NhbGxiYWNrSGVsbENoYWluZXIudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvZmlsZUluQ2h1bmtQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvY2FsbGJhY2sudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvaW5kZXgudHMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiaW5zdGFsbGVkTW9kdWxlcyIsIjAiLCJpbnN0YWxsZWRXYXNtTW9kdWxlcyIsIndhc21JbXBvcnRPYmplY3RzIiwiMiIsInAwaTMyIiwicDFpMzIiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZSIsImwiLCJlIiwicHJvbWlzZXMiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvblNjcmlwdENvbXBsZXRlIiwic2NyaXB0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsInAiLCJqc29ucFNjcmlwdFNyYyIsImVycm9yIiwiRXJyb3IiLCJldmVudCIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJjaHVuayIsImVycm9yVHlwZSIsInR5cGUiLCJyZWFsU3JjIiwidGFyZ2V0IiwibWVzc2FnZSIsIm5hbWUiLCJyZXF1ZXN0IiwidW5kZWZpbmVkIiwic2V0VGltZW91dCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJ3YXNtTW9kdWxlSWQiLCJpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSIsImltcG9ydE9iamVjdCIsInJlcSIsImZldGNoIiwiV2ViQXNzZW1ibHkiLCJjb21waWxlU3RyZWFtaW5nIiwiYWxsIiwidGhlbiIsIml0ZW1zIiwiaW5zdGFudGlhdGUiLCJpbnN0YW50aWF0ZVN0cmVhbWluZyIsIngiLCJhcnJheUJ1ZmZlciIsImJ5dGVzIiwicmVzIiwidyIsImluc3RhbmNlIiwibSIsImMiLCJkIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5Iiwib2UiLCJlcnIiLCJjb25zb2xlIiwianNvbnBBcnJheSIsIndpbmRvdyIsIm9sZEpzb25wRnVuY3Rpb24iLCJzbGljZSIsInMiLCJWYWxpZGF0ZSIsIm9iaiIsInRyYWNlIiwidGhpcyIsIm51bGxtc2ciLCJSZWZlcmVuY2VFcnJvciIsIm5vdE51bGwiLCJub3RVbmRlZmluZWQiLCJxIiwiZWxlbWVudElkIiwiZWxlbSIsImdldEVsZW1lbnRCeUlkIiwiSHR0cCIsIm1ldGhvZCIsInVybCIsImNvbnRlbnQiLCJjYWxsYmFjayIsImVycm9yQ2FsbGJhY2siLCJjb250ZW50VHlwZSIsIlhNTEh0dHBSZXF1ZXN0IiwibXlIb3N0IiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInBhdGhuYW1lIiwib3BlbiIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwicmVzcG9uc2VUZXh0Iiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJRdWV1ZSIsImNvbnRpbnVhdGlvbiIsInF1ZXVlIiwiQXJyYXkiLCJzdGFydGVkIiwibG9nIiwibmV4dCIsInBvcCIsInJldmVyc2UiLCJkYXRhQ2FsbGJhY2siLCJwcm9ncmVzc0NhbGxiYWNrIiwicHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrIiwiQ0hVTktfU0laRV9JTl9CWVRFUyIsInN0YXJ0IiwiZW5kIiwibnVtQ2h1bmtzIiwiY2h1bmtDb3VudGVyIiwiaW5wdXRGaWxlIiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJnZXRGaWxlUmVhZE9uTG9hZEhhbmRsZXIiLCJzdGFydFRpbWUiLCJEYXRlIiwiTWF0aCIsInJvdW5kIiwic2l6ZSIsInJlYWQiLCJVaW50OEFycmF5IiwicmVzdWx0IiwicmVhZEFzQXJyYXlCdWZmZXIiLCJoYXNoTGlzdCIsImlucHV0RmlsZXNBcmVhIiwiaW5uZXJIVE1MIiwiYnRuIiwib25jbGljayIsIl8iLCJzdWJtaXRIYXNoZXMiLCJzdHJpbmdpZnkiLCJoYXNoZXMiLCJwb3N0SGFzaGVzUmVzcG9uc2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2hvd0lkcExvZ2luQnV0dG9ucyIsInBhcmVudE5vZGUiLCJ0ZW1wbGF0ZSIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJwcm92aWRlcnMiLCJuZXdJZHBCdXR0b24iLCJpbnNlcnRCZWZvcmUiLCJmaWxlIiwiaW5kZXgiLCJjYXJkRWxlbWVudCIsInBlcmNlbnRDb21wbGV0ZWQiLCJyZW5kZXJDYXJkVGVtcGxhdGUiLCJ3YXNtSGFzaGVyIiwiaGFzaCIsImhleF9kaWdlc3QiLCJoYXNoVmFsdWUiLCJmaWxlc0VsZW1lbnQiLCJmaWxlcyIsImFsZXJ0IiwidXBkYXRlRmlsZXNBcmVhIiwiZXJyb3JFbGVtZW50Iiwic2lnbmluZ1Jlc3BvbnNlU3RyaW5nIiwiZ2V0SXRlbSIsImlkdG9rZW4iLCJnZXRJZFRva2VuRnJvbUdldFBhcmFtZXRlcnMiLCJzZWVkIiwic2FsdCIsInBhcmFtTGlzdCIsInNwbGl0IiwicGFyYW0iLCJtc2ciLCJTaGEyNTZoYXNoZXIiLCJwcm9jZXNzRmlsZUJ1dHRvbiIsImZpbGVMaXN0IiwiZ2V0RmlsZXNGcm9tRWxlbWVudCIsImhhc2hlcnNRdWV1ZSIsInNob3dTdWJtaXNzaW9uQnV0dG9uIiwibm90TnVsbE5vdFVuZGVmaW5lZCIsImNhcmREZWNrIiwibmV3Q2FyZCIsImlkIiwiYWRkIiwidXBkYXRlIiwiZXJyb3JIYW5kbGluZ0NhbGxiYWNrIiwicHJvZ3Jlc3NDYWxsYmFja0J1aWxkZXIiLCJwcm9jZXNzaW5nQ29tcGxldGVkQnVpbGRlciIsInByb2Nlc3NDaHVua3MiLCJwcm9jZXNzRmlsZUJ1dHRvbkhhbmRsZXIiLCJpbmNsdWRlcyIsImhhbmRsZSIsImxvYWQiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVBQWNKLEVBQUssR0FLQUssRUFBSSxFQUFHQyxFQUFXLEdBQ3BDRCxFQUFJRixFQUFTSSxPQUFRRixJQUN6QkgsRUFBVUMsRUFBU0UsR0FDaEJHLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtDLEVBQWlCVixJQUFZVSxFQUFnQlYsSUFDcEZJLEVBQVNPLEtBQUtELEVBQWdCVixHQUFTLElBRXhDVSxFQUFnQlYsR0FBVyxFQUU1QixJQUFJRCxLQUFZRyxFQUNaSSxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLUCxFQUFhSCxLQUNwRGEsRUFBUWIsR0FBWUcsRUFBWUgsSUFLbEMsSUFGR2MsR0FBcUJBLEVBQW9CZixHQUV0Q00sRUFBU0MsUUFDZEQsRUFBU1UsT0FBVFYsR0FPRixJQUFJVyxFQUFtQixHQUtuQkwsRUFBa0IsQ0FDckJNLEVBQUcsR0FXSixJQUFJQyxFQUF1QixHQUkzQixJQUFJQyxFQUFvQixDQUN2QkMsRUFBRyxXQUNGLE1BQU8sQ0FDTixhQUFjLENBQ2IsaUJBQW9CLFNBQVNDLEVBQU1DLEdBQ2xDLE9BQU9OLEVBQWlCLEdBQUdPLFFBQTBC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U0FBU0MsY0FBYyxPQUN2QzhMLEVBQVFDLEdBQUssUUFBUWhPLElBQ3JCK04sRUFBUWxELFVBQVksRUFBR3NCLG1CQUFtQkosRUFBTSxVQUM1Q25GLEVBQVNNLFFBQVE0RyxFQUFTdEMsYUFDMUJzQyxFQUFTdEMsV0FBV00sYUFBYWlDLEVBQVNELEdBSWxESCxFQUFhTSxJQUNSOUUsSUFDRyxJQUFJLEVBQXVCeEosSUFDbkJ5TSxFQUFXOEIsT0FBTyxJQUFJMUQsV0FBVyxLQUVyQyxFQUFHMkQsc0JBQ0gsRUFBR0Msd0JBQXdCckMsRUFBTS9MLEdBQ2pDLEVBQUdxTywyQkFBMkJsRixFQUFrQndCLEVBQVVvQixFQUFNL0wsRUFBR29NLElBQ3JFa0MsY0FBY2IsRUFBU3pOLE1BSXJDMk4sRUFBYWpFLFNFL09UNkUsQ0FBeUIsSUFBSWhCLEVBQWFBLGlCQUt0RCxXLGtDQUNPdkwsU0FBU2lHLFNBQVNHLFNBQVNvRyxTQUFTLFNBQ25DLFFBQVksNkJBRVJ4TSxTQUFTaUcsU0FBU0csU0FBU29HLFNBQVMsYUFDeEMsRUFBR0MsWUFJWEMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0fTtcblxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuXG5cbiBcdC8vIHNjcmlwdCBwYXRoIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBqc29ucFNjcmlwdFNyYyhjaHVua0lkKSB7XG4gXHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmJ1bmRsZS5qc1wiXG4gXHR9XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgd2FzbSBtb2R1bGVzXG4gXHR2YXIgaW5zdGFsbGVkV2FzbU1vZHVsZXMgPSB7fTtcblxuIFx0ZnVuY3Rpb24gcHJvbWlzZVJlc29sdmUoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfVxuXG4gXHR2YXIgd2FzbUltcG9ydE9iamVjdHMgPSB7XG4gXHRcdDI6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcIi4vaW5kZXguanNcIjoge1xuIFx0XHRcdFx0XHRcIl9fd2JpbmRnZW5fdGhyb3dcIjogZnVuY3Rpb24ocDBpMzIscDFpMzIpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1sxXS5leHBvcnRzW1wiX193YmluZGdlbl90aHJvd1wiXShwMGkzMixwMWkzMik7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9LFxuIFx0fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCkge1xuIFx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcblxuXG4gXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblxuIFx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG4gXHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuIFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcbiBcdFx0XHRcdH0pO1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuIFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdFx0dmFyIG9uU2NyaXB0Q29tcGxldGU7XG5cbiBcdFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuIFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcbiBcdFx0XHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c2NyaXB0LnNyYyA9IGpzb25wU2NyaXB0U3JjKGNodW5rSWQpO1xuXG4gXHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG4gXHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcbiBcdFx0XHRcdG9uU2NyaXB0Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiBcdFx0XHRcdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuIFx0XHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuIFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG4gXHRcdFx0XHRcdHZhciBjaHVuayA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0XHRcdFx0aWYoY2h1bmsgIT09IDApIHtcbiBcdFx0XHRcdFx0XHRpZihjaHVuaykge1xuIFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcbiBcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG4gXHRcdFx0XHRcdFx0XHRjaHVua1sxXShlcnJvcik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fTtcbiBcdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRvblNjcmlwdENvbXBsZXRlKHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KTtcbiBcdFx0XHRcdH0sIDEyMDAwMCk7XG4gXHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlO1xuIFx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIEZldGNoICsgY29tcGlsZSBjaHVuayBsb2FkaW5nIGZvciB3ZWJhc3NlbWJseVxuXG4gXHRcdHZhciB3YXNtTW9kdWxlcyA9IHtcIjFcIjpbMl19W2NodW5rSWRdIHx8IFtdO1xuXG4gXHRcdHdhc21Nb2R1bGVzLmZvckVhY2goZnVuY3Rpb24od2FzbU1vZHVsZUlkKSB7XG4gXHRcdFx0dmFyIGluc3RhbGxlZFdhc21Nb2R1bGVEYXRhID0gaW5zdGFsbGVkV2FzbU1vZHVsZXNbd2FzbU1vZHVsZUlkXTtcblxuIFx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIgb3IgXCJhbHJlYWR5IGxvYWRlZFwiLlxuIFx0XHRcdGlmKGluc3RhbGxlZFdhc21Nb2R1bGVEYXRhKVxuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRXYXNtTW9kdWxlRGF0YSk7XG4gXHRcdFx0ZWxzZSB7XG4gXHRcdFx0XHR2YXIgaW1wb3J0T2JqZWN0ID0gd2FzbUltcG9ydE9iamVjdHNbd2FzbU1vZHVsZUlkXSgpO1xuIFx0XHRcdFx0dmFyIHJlcSA9IGZldGNoKF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyB7XCIyXCI6XCIwYWZlYjFjNzY0MjQ0ZWIxM2U0MFwifVt3YXNtTW9kdWxlSWRdICsgXCIubW9kdWxlLndhc21cIik7XG4gXHRcdFx0XHR2YXIgcHJvbWlzZTtcbiBcdFx0XHRcdGlmKGltcG9ydE9iamVjdCBpbnN0YW5jZW9mIFByb21pc2UgJiYgdHlwZW9mIFdlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcgPT09ICdmdW5jdGlvbicpIHtcbiBcdFx0XHRcdFx0cHJvbWlzZSA9IFByb21pc2UuYWxsKFtXZWJBc3NlbWJseS5jb21waWxlU3RyZWFtaW5nKHJlcSksIGltcG9ydE9iamVjdF0pLnRoZW4oZnVuY3Rpb24oaXRlbXMpIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoaXRlbXNbMF0sIGl0ZW1zWzFdKTtcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9IGVsc2UgaWYodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gXHRcdFx0XHRcdHByb21pc2UgPSBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhyZXEsIGltcG9ydE9iamVjdCk7XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHR2YXIgYnl0ZXNQcm9taXNlID0gcmVxLnRoZW4oZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hcnJheUJ1ZmZlcigpOyB9KTtcbiBcdFx0XHRcdFx0cHJvbWlzZSA9IGJ5dGVzUHJvbWlzZS50aGVuKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGJ5dGVzLCBpbXBvcnRPYmplY3QpO1xuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkV2FzbU1vZHVsZXNbd2FzbU1vZHVsZUlkXSA9IHByb21pc2UudGhlbihmdW5jdGlvbihyZXMpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ud1t3YXNtTW9kdWxlSWRdID0gKHJlcy5pbnN0YW5jZSB8fCByZXMpLmV4cG9ydHM7XG4gXHRcdFx0XHR9KSk7XG4gXHRcdFx0fVxuIFx0XHR9KTtcbiBcdFx0cmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiBcdH07XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gb24gZXJyb3IgZnVuY3Rpb24gZm9yIGFzeW5jIGxvYWRpbmdcbiBcdF9fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH07XG5cbiBcdC8vIG9iamVjdCB3aXRoIGFsbCBXZWJBc3NlbWJseS5pbnN0YW5jZSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLncgPSB7fTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgVmFsaWRhdGUge1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IG51bGxtc2cgPSBcIkVycm9yOiBvYmplY3Qgd2FzIG51bGxcIjtcbiAgICBwdWJsaWMgc3RhdGljIG5vdE51bGw8VD4ob2JqOiBUKTogb2JqIGlzIEV4Y2x1ZGU8VCwgbnVsbD4ge1xuICAgICAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUudHJhY2UodGhpcy5udWxsbXNnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcih0aGlzLm51bGxtc2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgbm90VW5kZWZpbmVkPFQ+KG9iajogVCk6IG9iaiBpcyBFeGNsdWRlPFQsIHVuZGVmaW5lZD4ge1xuICAgICAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgRXJyb3I6IE9iamVjdCAke29ian0gd2FzIHVuZGVmaW5lZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgbm90TnVsbE5vdFVuZGVmaW5lZDxUPihvYmo6IFQpOiBvYmogaXMgTm9uTnVsbGFibGU8VD4ge1xuICAgICAgICByZXR1cm4gVmFsaWRhdGUubm90TnVsbChvYmopICYmIFZhbGlkYXRlLm5vdFVuZGVmaW5lZChvYmopO1xuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBxKGVsZW1lbnRJZDogc3RyaW5nKTogRXhjbHVkZTxIVE1MRWxlbWVudCwgbnVsbD4ge1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICAgIGlmIChlbGVtID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGBFcnJvcjogRWxlbWVudCB3aXRoIGlkIFwiJHtlbGVtZW50SWR9XCIgZG9lcyBub3QgZXhpc3RgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgSHR0cCB7XG4gICAgcHVibGljIHN0YXRpYyByZXF1ZXN0PFQ+KFxuICAgICAgICBtZXRob2Q6ICdHRVQnIHwgJ1BPU1QnLFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgY29udGVudD86IHN0cmluZyxcbiAgICAgICAgY2FsbGJhY2s/OiAocmVzcG9uc2U6IFQpID0+IHZvaWQsXG4gICAgICAgIGVycm9yQ2FsbGJhY2s/OiAoZXJyOiBhbnkpID0+IHZvaWQsXG4gICAgICAgIGNvbnRlbnRUeXBlPzogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY29uc3QgbXlIb3N0ID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsICcnKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgYCR7bXlIb3N0fS8ke3VybH1gLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSBhcyBUKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5zZW5kKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcmVxdWVzdFByb21pc2U8VD4oXG4gICAgICAgIG1ldGhvZDogJ0dFVCcgfCAnUE9TVCcsXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBjb250ZW50ID86IHN0cmluZ1xuICAgICk6IFByb21pc2U8VD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KG1ldGhvZCwgdXJsLCBjb250ZW50LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGxhYmxlLCBDb250aW51YWJsZX0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuXG5leHBvcnQgY2xhc3MgUXVldWUge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcXVldWUgPSBBcnJheTxDYWxsYWJsZT4oKTtcbiAgICBwcml2YXRlIGNvbnRpbnVhdGlvbjogQ2FsbGFibGU7XG4gICAgcHJpdmF0ZSBzdGFydGVkOiBCb29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250aW51YXRpb246IENhbGxhYmxlKSB7XG4gICAgICAgIHRoaXMuY29udGludWF0aW9uID0gY29udGludWF0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQoYzogQ29udGludWFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgaWYgKG5leHQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYyhuZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYyh0aGlzLmNvbnRpbnVhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1ZXVlLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMucXVldWUucG9wKCk7XG4gICAgICAgIGlmIChjICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYygpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtWYWxpZGF0ZX0gZnJvbSBcIi4vdmFsaWRhdGVcIjtcbmltcG9ydCB7U2hhMjU2aGFzaGVyfSBmcm9tIFwiLi4vcGtnXCI7XG5pbXBvcnQge3F9IGZyb20gXCIuL3RzUXVlcnlcIjtcbmltcG9ydCB7XG4gICAgQ2FsbGFibGUsIENvbnRpbnVhYmxlLFxuICAgIEVycm9yQ2FsbGJhY2ssXG4gICAgRmlsZUNodW5rRGF0YUNhbGxiYWNrLCBGaWxlUmVhZGVyT25Mb2FkQ2FsbGJhY2ssIFBvb3JQZW9wbGVQZXJzaXN0ZW5jZSwgUG9zdEhhc2hlc1Jlc3BvbnNlLFxuICAgIFByb2Nlc3NpbmdDb21wbGV0ZWRDYWxsYmFjayxcbiAgICBQcm9ncmVzc0NhbGxiYWNrXG59IGZyb20gXCIuL2ludGVyZmFjZXNcIjtcbmltcG9ydCB7SHR0cH0gZnJvbSBcIi4vaHR0cFwiO1xuaW1wb3J0IHtRdWV1ZX0gZnJvbSBcIi4vY2FsbGJhY2tIZWxsQ2hhaW5lclwiO1xuXG5cbmNsYXNzIEZpbGVJbkNodW5rc1Byb2Nlc3NvciB7XG4gICAgcHVibGljIHJlYWRvbmx5IENIVU5LX1NJWkVfSU5fQllURVM6IG51bWJlciA9IDEwMjQgKiAxMDAwICogMjA7XG4gICAgcHJpdmF0ZSByZWFkb25seSBmaWxlUmVhZGVyOiBGaWxlUmVhZGVyO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZGF0YUNhbGxiYWNrOiBGaWxlQ2h1bmtEYXRhQ2FsbGJhY2s7XG4gICAgcHJpdmF0ZSByZWFkb25seSBlcnJvckNhbGxiYWNrOiBFcnJvckNhbGxiYWNrO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrOiBQcm9jZXNzaW5nQ29tcGxldGVkQ2FsbGJhY2s7XG4gICAgcHJpdmF0ZSByZWFkb25seSBwcm9ncmVzc0NhbGxiYWNrOiBQcm9ncmVzc0NhbGxiYWNrO1xuICAgIHByaXZhdGUgc3RhcnQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBlbmQ6IG51bWJlciA9IHRoaXMuc3RhcnQgKyB0aGlzLkNIVU5LX1NJWkVfSU5fQllURVM7XG4gICAgcHJpdmF0ZSBzdGFydFRpbWU/OiBEYXRlO1xuICAgIHByaXZhdGUgbnVtQ2h1bmtzOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgY2h1bmtDb3VudGVyOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgaW5wdXRGaWxlOiBGaWxlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhQ2FsbGJhY2s6IEZpbGVDaHVua0RhdGFDYWxsYmFjayxcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrOiBFcnJvckNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s6IFByb2dyZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrOiBDYWxsYWJsZSkge1xuICAgICAgICB0aGlzLmZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICB0aGlzLmZpbGVSZWFkZXIub25sb2FkID0gdGhpcy5nZXRGaWxlUmVhZE9uTG9hZEhhbmRsZXIoKTtcbiAgICAgICAgdGhpcy5kYXRhQ2FsbGJhY2sgPSBkYXRhQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrID0gcHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrO1xuICAgICAgICB0aGlzLnByb2dyZXNzQ2FsbGJhY2sgPSBwcm9ncmVzc0NhbGxiYWNrO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcm9jZXNzQ2h1bmtzKGlucHV0RmlsZTogRmlsZSkge1xuICAgICAgICB0aGlzLmlucHV0RmlsZSA9IGlucHV0RmlsZTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLm51bUNodW5rcyA9IE1hdGgucm91bmQodGhpcy5pbnB1dEZpbGUuc2l6ZSAvIHRoaXMuQ0hVTktfU0laRV9JTl9CWVRFUyk7XG4gICAgICAgIHRoaXMucmVhZCh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGdldEZpbGVSZWFkT25Mb2FkSGFuZGxlcigpOiBGaWxlUmVhZGVyT25Mb2FkQ2FsbGJhY2sge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwodGhpcy5pbnB1dEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhQ2FsbGJhY2sobmV3IFVpbnQ4QXJyYXkoKHRoaXMuZmlsZVJlYWRlci5yZXN1bHQgYXMgQXJyYXlCdWZmZXIpKSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5lbmQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5kIDwgdGhpcy5pbnB1dEZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNodW5rQ291bnRlcisrO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IHRoaXMuc3RhcnQgKyB0aGlzLkNIVU5LX1NJWkVfSU5fQllURVM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NDYWxsYmFjayhNYXRoLnJvdW5kKCh0aGlzLmNodW5rQ291bnRlciAvIHRoaXMubnVtQ2h1bmtzKSAqIDEwMCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWQodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ0NvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKHRoaXMuaW5wdXRGaWxlKSkge1xuICAgICAgICAgICAgdGhpcy5maWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHRoaXMuaW5wdXRGaWxlLnNsaWNlKHN0YXJ0LCBlbmQpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5jbGFzcyBUUyB7XG4gICAgcHVibGljIHN0YXRpYyBzaG93U3VibWlzc2lvbkJ1dHRvbihoYXNoTGlzdDogQXJyYXk8c3RyaW5nPikge1xuICAgICAgICBjb25zdCBpbnB1dEZpbGVzQXJlYSA9IHEoXCJpbnB1dC1maWxlcy1hcmVhXCIpO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChpbnB1dEZpbGVzQXJlYSkpIHtcbiAgICAgICAgICAgIGlucHV0RmlsZXNBcmVhLmlubmVySFRNTCA9IGA8cCBjbGFzcz1cImxlYWRcIj5IYXNoaW5nIGNvbXBsZXRlZC4gQ29udGludWUgd2hlbiByZWFkeTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tYmxvY2sgYnRuLW91dGxpbmUtcHJpbWFyeVwiIGlkPVwic3VibWl0aGFzaGVzXCI+U3VibWl0IGZvciBzaWduaW5nPC9idXR0b24+YDtcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IHEoXCJzdWJtaXRoYXNoZXNcIik7XG4gICAgICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChidG4pKSB7XG4gICAgICAgICAgICAgICAgKGJ0biBhcyBIVE1MQnV0dG9uRWxlbWVudCkub25jbGljayA9IF8gPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdEhhc2hlcyhoYXNoTGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzdWJtaXRIYXNoZXMoaGFzaExpc3Q6IEFycmF5PHN0cmluZz4pIHtcbiAgICAgICAgSHR0cC5yZXF1ZXN0PFBvc3RIYXNoZXNSZXNwb25zZT4oJ1BPU1QnLFxuICAgICAgICAgICAgJy9hcGkvdjEvaGFzaGVzLycsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgaGFzaGVzOiBoYXNoTGlzdFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHA6IFBvb3JQZW9wbGVQZXJzaXN0ZW5jZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdEhhc2hlc1Jlc3BvbnNlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgaGFzaGVzOiBoYXNoTGlzdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2xub2dlbmVyaWNzJywgSlNPTi5zdHJpbmdpZnkocCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0lkcExvZ2luQnV0dG9ucyhyZXNwb25zZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyID0+IGNvbnNvbGUubG9nKGBlcnJvciAke2Vycn1gKSxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQT1NUICR7aGFzaExpc3R9YCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzaG93SWRwTG9naW5CdXR0b25zKHJlc3BvbnNlOiBQb3N0SGFzaGVzUmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgaW5wdXRGaWxlc0FyZWEgPSBxKFwiaW5wdXQtZmlsZXMtYXJlYVwiKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2Z1MScpO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChpbnB1dEZpbGVzQXJlYSkpIHtcbiAgICAgICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKGlucHV0RmlsZXNBcmVhLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Z1MicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYDxwIGNsYXNzPVwibGVhZFwiPlBsZWFzZSBzZWxlY3Qgd2hvbSB0byBhdXRoZW50aWNhdGUgd2l0aDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiSURQVVJMXCIgY2xhc3M9XCJidXR0b24gYnRuIGJ0bi1ibG9jayBidG4tb3V0bGluZS1wcmltYXJ5XCI+SURQTkFNRTwvYT5gO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnB1dEZpbGVzQXJlYS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0RmlsZXNBcmVhLnJlbW92ZUNoaWxkKGlucHV0RmlsZXNBcmVhLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2UucHJvdmlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmdTMnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SWRwQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0lkcEJ1dHRvbi5pbm5lckhUTUwgPSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0lEUFVSTCcsIHJlc3BvbnNlLnByb3ZpZGVyc1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0lEUE5BTUUnLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEZpbGVzQXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdJZHBCdXR0b24sIGlucHV0RmlsZXNBcmVhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgcHJvZ3Jlc3NDYWxsYmFja0J1aWxkZXIoZmlsZTogRmlsZSwgaW5kZXg6IG51bWJlcik6XG4gICAgICAgIFByb2dyZXNzQ2FsbGJhY2sge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHEoYGZpbGUuJHtpbmRleH1gKTtcbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoY2FyZEVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHBlcmNlbnRDb21wbGV0ZWQgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LmlubmVySFRNTCA9IHRoaXMucmVuZGVyQ2FyZFRlbXBsYXRlKGZpbGUsIGAke3BlcmNlbnRDb21wbGV0ZWR9JWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKF8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FyZEVsZW1lbnQgZmlsZS4ke2luZGV4fSB3YXMgbnVsbCwgY2Fubm90IHVwZGF0ZSBwcm9ncmVzc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBwcm9jZXNzaW5nQ29tcGxldGVkQnVpbGRlcihuZXh0OiBDYWxsYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hMaXN0OiBBcnJheTxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXNtSGFzaGVyOiBTaGEyNTZoYXNoZXJcbiAgICApOiBDYWxsYWJsZSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcShgZmlsZS4ke2luZGV4fWApO1xuICAgICAgICBpZiAoVmFsaWRhdGUubm90TnVsbChjYXJkRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IHdhc21IYXNoZXIuaGV4X2RpZ2VzdCgpO1xuICAgICAgICAgICAgICAgIGhhc2hMaXN0LnB1c2goaGFzaCk7XG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJDYXJkVGVtcGxhdGUoZmlsZSwgaGFzaCk7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FyZEVsZW1lbnQgZmlsZS4ke2luZGV4fSB3YXMgbnVsbCwgY2Fubm90IHVwZGF0ZSBwcm9ncmVzc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyByZW5kZXJDYXJkVGVtcGxhdGUoZmlsZTogRmlsZSwgaGFzaFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjYXJkIG1iLTQgYm94LXNoYWRvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibXktMCBmb250LXdlaWdodC1ub3JtYWxcIj5GSUxFTkFNRTwvaDU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG10LTMgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGk+U2l6ZTogRklMRVNJWkU8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+VHlwZTogRklMRVRZUEU8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGk+SGFzaDogRklMRUhBU0g8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG48IS0tICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1ibG9jayBidG4tZGFuZ2VyXCI+UmVtb3ZlIGZpbGU8L2J1dHRvbj4tLT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAucmVwbGFjZShcIkZJTEVOQU1FXCIsIGZpbGUubmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiRklMRVNJWkVcIiwgZmlsZS5zaXplIDwgMTAyNCAqIDEwMjQgPyBgJHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQpfSBLQmAgOiBgJHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0KX0gTUJgKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCJGSUxFVFlQRVwiLCBmaWxlLnR5cGUgIT0gXCJcIiA/IGZpbGUudHlwZSA6IFwiVW5rbm93blwiKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCJGSUxFSEFTSFwiLCBoYXNoVmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmlsZXNGcm9tRWxlbWVudChlbGVtZW50SWQ6IHN0cmluZyk6IEZpbGVMaXN0IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgZmlsZXNFbGVtZW50ID0gcShlbGVtZW50SWQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoZmlsZXNFbGVtZW50LmZpbGVzKSkge1xuICAgICAgICAgICAgaWYgKGZpbGVzRWxlbWVudC5maWxlcy5sZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUb28gZmV3IGZpbGVzIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBmaWxlLlwiKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbGVzQXJlYShcIldhaXQgZm9yIGhhc2hpbmcgdG8gZmluaXNoXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmlsZXNFbGVtZW50LmZpbGVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB1cGRhdGVGaWxlc0FyZWEobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsZXNBcmVhID0gcShcImlucHV0LWZpbGVzLWFyZWFcIik7XG4gICAgICAgIGlmIChWYWxpZGF0ZS5ub3ROdWxsKGlucHV0RmlsZXNBcmVhKSkge1xuICAgICAgICAgICAgaW5wdXRGaWxlc0FyZWEuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwibGVhZFwiPiR7bWVzc2FnZX08L3A+YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZXJyb3JIYW5kbGluZ0NhbGxiYWNrKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBxKFwiZXJyb3JcIik7XG4gICAgICAgIGVycm9yRWxlbWVudC5pbm5lckhUTUwgPSBgJHtlcnJvckVsZW1lbnQuaW5uZXJIVE1MfSA8cD4ke21lc3NhZ2V9PC9wPmA7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRmlsZUJ1dHRvbkhhbmRsZXIod2FzbUhhc2hlcjogU2hhMjU2aGFzaGVyKSB7XG4gICAgY29uc3QgZmlsZUxpc3QgPSBUUy5nZXRGaWxlc0Zyb21FbGVtZW50KFwiZmlsZVwiKTtcbiAgICBjb25zdCBoYXNoTGlzdCA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gICAgY29uc3QgaGFzaGVyc1F1ZXVlID0gbmV3IFF1ZXVlKCgpID0+IHtcbiAgICAgICAgVFMuc2hvd1N1Ym1pc3Npb25CdXR0b24oaGFzaExpc3QpXG4gICAgfSk7XG5cbiAgICBpZiAoVmFsaWRhdGUubm90TnVsbE5vdFVuZGVmaW5lZChmaWxlTGlzdCkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVMaXN0W2ldO1xuICAgICAgICAgICAgY29uc3QgY2FyZERlY2sgPSBxKCdjYXJkYXJlYScpO1xuICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGxOb3RVbmRlZmluZWQoY2FyZERlY2spKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIG5ld0NhcmQuaWQgPSBgZmlsZS4ke2l9YDtcbiAgICAgICAgICAgICAgICBuZXdDYXJkLmlubmVySFRNTCA9IFRTLnJlbmRlckNhcmRUZW1wbGF0ZShmaWxlLCAnUXVldWVkJyk7XG4gICAgICAgICAgICAgICAgaWYgKFZhbGlkYXRlLm5vdE51bGwoY2FyZERlY2sucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZERlY2sucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Q2FyZCwgY2FyZERlY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFzaGVyc1F1ZXVlLmFkZChcbiAgICAgICAgICAgICAgICAobmV4dDogQ2FsbGFibGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGVJbkNodW5rc1Byb2Nlc3NvcigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc21IYXNoZXIudXBkYXRlKG5ldyBVaW50OEFycmF5KChkYXRhKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFRTLmVycm9ySGFuZGxpbmdDYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIFRTLnByb2dyZXNzQ2FsbGJhY2tCdWlsZGVyKGZpbGUsIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgVFMucHJvY2Vzc2luZ0NvbXBsZXRlZEJ1aWxkZXIobmV4dCBhcyBDYWxsYWJsZSwgaGFzaExpc3QsIGZpbGUsIGksIHdhc21IYXNoZXIpXG4gICAgICAgICAgICAgICAgICAgICkucHJvY2Vzc0NodW5rcyhmaWxlTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoZXJzUXVldWUuc3RhcnQoKTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7VmFsaWRhdGV9IGZyb20gXCIuL3ZhbGlkYXRlXCI7XG5pbXBvcnQge1Bvb3JQZW9wbGVQZXJzaXN0ZW5jZX0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHtIdHRwfSBmcm9tIFwiLi9odHRwXCI7XG5cbmludGVyZmFjZSBTaWduaW5nUmVxdWVzdCB7XG4gICAgaWR0b2tlbjogc3RyaW5nLFxuICAgIHNlZWQ6IHN0cmluZyxcbiAgICBzYWx0OiBzdHJpbmcsXG4gICAgaGFzaGVzOiBBcnJheTxzdHJpbmc+XG59XG5cbmludGVyZmFjZSBTaWduaW5nUmVzcG9uc2Uge1xuICAgIHNpZ25hdHVyZTogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBDQiB7XG4gICAgcHVibGljIHN0YXRpYyBoYW5kbGUoKSB7XG4gICAgICAgIGNvbnN0IHNpZ25pbmdSZXNwb25zZVN0cmluZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9sbm9nZW5lcmljcycpO1xuICAgICAgICBpZihWYWxpZGF0ZS5ub3ROdWxsKHNpZ25pbmdSZXNwb25zZVN0cmluZykpIHtcbiAgICAgICAgICAgIGNvbnN0IHA6IFBvb3JQZW9wbGVQZXJzaXN0ZW5jZSA9IEpTT04ucGFyc2Uoc2lnbmluZ1Jlc3BvbnNlU3RyaW5nKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcTogU2lnbmluZ1JlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgaWR0b2tlbiA6IHRoaXMuZ2V0SWRUb2tlbkZyb21HZXRQYXJhbWV0ZXJzKCksXG4gICAgICAgICAgICAgICAgc2VlZDogcC5wb3N0SGFzaGVzUmVzcG9uc2Uuc2VlZCxcbiAgICAgICAgICAgICAgICBzYWx0OiBwLnBvc3RIYXNoZXNSZXNwb25zZS5zYWx0LFxuICAgICAgICAgICAgICAgIGhhc2hlczogcC5oYXNoZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBIdHRwLnJlcXVlc3Q8U2lnbmluZ1Jlc3BvbnNlPihcbiAgICAgICAgICAgICAgICBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBcIi9hcGkvdjEvc2lnblwiLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHJlcSksXG4gICAgICAgICAgICAgICAgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyID0+IGNvbnNvbGUubG9nKFwiZXJyb3IgXCIgKyBlcnIpLFxuICAgICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRJZFRva2VuRnJvbUdldFBhcmFtZXRlcnMoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcGFyYW1MaXN0ID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVsxXS5zcGxpdCgnJicpO1xuICAgICAgICBmb3IoY29uc3QgcyBvZiBwYXJhbUxpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gcy5zcGxpdCgnPScpO1xuICAgICAgICAgICAgaWYocGFyYW1bMF0gPT0gJ2lkX3Rva2VuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtc2cgPSAnRm91bmQgbm8gaWRfdG9rZW4gaW4gdXJsJztcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG59IiwiaW1wb3J0IHtWYWxpZGF0ZX0gZnJvbSBcIi4vdmFsaWRhdGVcIjtcbmltcG9ydCB7cHJvY2Vzc0ZpbGVCdXR0b25IYW5kbGVyfSBmcm9tIFwiLi9maWxlSW5DaHVua1Byb2Nlc3NvclwiXG5pbXBvcnQge0NCfSBmcm9tIFwiLi9jYWxsYmFja1wiO1xuXG5mdW5jdGlvbiBzdGFydChTaGEyNTZoYXNoZXI6IHR5cGVvZiBpbXBvcnQoJy4uL3BrZycpKSB7XG4gICAgY29uc3QgcHJvY2Vzc0ZpbGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2Nlc3MtZmlsZVwiKTtcbiAgICBpZiAoVmFsaWRhdGUubm90TnVsbChwcm9jZXNzRmlsZUJ1dHRvbikpIHtcbiAgICAgICAgcHJvY2Vzc0ZpbGVCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2Nlc3NGaWxlQnV0dG9uSGFuZGxlcihuZXcgU2hhMjU2aGFzaGVyLlNoYTI1Nmhhc2hlcigpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9hZCgpIHtcbiAgICBpZihkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcyhcImluZGV4XCIpKSB7XG4gICAgICAgIHN0YXJ0KGF3YWl0IGltcG9ydChcIi4uL3BrZ1wiKSk7XG4gICAgfVxuICAgIGVsc2UgaWYoZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoXCJjYWxsYmFja1wiKSl7XG4gICAgICAgIENCLmhhbmRsZSgpO1xuICAgIH1cbn1cblxubG9hZCgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==